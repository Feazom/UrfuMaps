(this["webpackJsonpurfu-maps"]=this["webpackJsonpurfu-maps"]||[]).push([[0],[,,,,,,,,,,,,function(e,t,n){},,,function(e,t,n){},,,,,,function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);n(15);var c=n(13),i=n.n(c),a=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,28)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),i(e),a(e),s(e)}))},s=n(9),r=n(2),o=n(3),l=n(1),j=n(5),u=n.n(j),b=n(8),d=n(6),O=(n(21),n(0)),h=function(e){var t=e.floorNumber,n=e.setFloorNumber,c=e.buildingName,i=e.searchedCabinet,a=Object(l.useState)(!0),s=Object(o.a)(a,2),r=s[0],j=s[1],h=Object(l.useState)(),m=Object(o.a)(h,2),x=m[0],f=m[1];return Object(l.useEffect)((function(){isNaN(parseInt(i[i.search("-")+1]))||-1!==i.search("-")&&null!=i[i.search("-")+1]&&n(Number(i[i.search("-")+1]))}),[i]),Object(l.useEffect)((function(){Object(b.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t||null==c){e.next=10;break}return e.next=3,fetch("".concat(d.a.API_DOMAIN,"/map?floor=").concat(t,"&building=").concat(c),{method:"GET"});case 3:return n=e.sent,e.t0=f,e.next=7,n.json();case 7:e.t1=e.sent,(0,e.t0)(e.t1),n.ok&&j(!1);case 10:case"end":return e.stop()}}),e)})))()}),[c,t,i]),Object(O.jsx)("div",{className:"map-scheme",children:r?Object(O.jsx)("img",{src:"loading-icon.svg",className:"loading-icon",alt:""}):Object(O.jsxs)("div",{className:"container",children:[Object(O.jsx)("img",{className:"map-image",src:null===x||void 0===x?void 0:x.imageLink,alt:"floor map"}),null===x||void 0===x?void 0:x.positions.map((function(e){var t={top:"".concat(e.y,"%"),left:"".concat(e.x,"%")};return e.cabinet===i?Object(O.jsx)("img",{className:"map-marker",src:"marker-icon.svg",alt:"mark",style:t},e.cabinet):null}))]})})},m=(n(12),function(e){var t,n,c=Object(l.useState)({}),i=Object(o.a)(c,2),a=i[0],s=i[1];function r(t){e.setFloorNumber(t.currentTarget.value)}function j(t){e.setBuildingName(t.currentTarget.value)}return Object(l.useEffect)((function(){Object(b.a)(u.a.mark((function e(){var t,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(d.a.API_DOMAIN,"/info"),{method:"GET"});case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,c={},n.forEach((function(e){c[e.buildingName]=e.floorList})),s(c);case 9:case"end":return e.stop()}}),e)})))()}),[]),Object(O.jsxs)("div",{className:"app-header",children:[Object(O.jsxs)("div",{className:"floor-select",children:[Object(O.jsx)("span",{children:"Floor: "}),Object(O.jsx)("select",{value:e.floorNumber,onChange:r,onLoad:r,children:null===(t=a[e.buildingName])||void 0===t?void 0:t.map((function(e){return Object(O.jsx)("option",{children:e},e)}))})]}),Object(O.jsxs)("div",{className:"building-select",children:[Object(O.jsx)("span",{children:"Building: "}),Object(O.jsx)("select",{onChange:j,onLoad:j,children:null===(n=Object.keys(a))||void 0===n?void 0:n.map((function(e){return Object(O.jsx)("option",{children:e},e)}))})]}),Object(O.jsxs)("div",{className:"cabinet-select",children:[Object(O.jsx)("span",{children:"Cabinet: "}),Object(O.jsx)("div",{children:Object(O.jsx)("input",{placeholder:"Search...",value:e.searchedCabinet,onChange:function(t){e.setSearchedCabinet(t.currentTarget.value)},size:5})})]})]})});n(23),n(24);var x=function(){var e=Object(l.useState)(1),t=Object(o.a)(e,2),n=t[0],c=t[1],i=Object(l.useState)("rtf"),a=Object(o.a)(i,2),r=a[0],j=a[1],u=Object(l.useState)(""),b=Object(o.a)(u,2),d=b[0],x=b[1];return Object(O.jsxs)("div",{className:"app",children:[Object(O.jsx)("div",{className:"link-add",children:Object(O.jsx)(s.b,{to:"/add",className:"linkstyle",children:"Add"})}),Object(O.jsxs)("div",{children:[Object(O.jsx)(m,{floor:n,setFloorNumber:c,floorNumber:n,buildingName:r,setBuildingName:j,searchedCabinet:d,setSearchedCabinet:x}),Object(O.jsx)(h,{floorNumber:n,setFloorNumber:c,buildingName:r,searchedCabinet:d})]})]})},f=n(14),p=function(e){var t=e.setEditedPosition,n=e.editedPosition,c=e.setCoords,i=e.coords,a=e.link,s=e.positions,r=e.setPositions,j=Object(l.useState)(NaN),h=Object(o.a)(j,2),m=h[0],x=h[1],p=Object(l.useState)(""),v=Object(o.a)(p,2),N=v[0],g=v[1],C=Object(l.useState)(""),k=Object(o.a)(C,2),y=k[0],S=k[1],F=Object(l.useState)(""),T=Object(o.a)(F,2),P=T[0],E=T[1];function A(){return(A=Object(b.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={floorNumber:m,buildingName:N,imageLink:a,positions:s},e.next=4,fetch("".concat(d.a.API_DOMAIN,"/map"),{headers:{Authorization:d.a.TOKEN,accept:"text/plain","Content-Type":"application/json"},method:"POST",body:JSON.stringify(n)});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(l.useEffect)((function(){t({cabinet:y,description:P,x:null===i||void 0===i?void 0:i.x,y:null===i||void 0===i?void 0:i.y})}),[y,P,i,t]),Object(O.jsxs)("div",{className:"app-header-edit",children:[Object(O.jsxs)("form",{className:"floor-edit",onSubmit:function(e){return A.apply(this,arguments)},children:[Object(O.jsx)("label",{children:"Floor:"}),Object(O.jsx)("input",{onChange:function(e){x(parseInt(e.currentTarget.value))},size:5}),Object(O.jsx)("label",{children:"Building:"}),Object(O.jsx)("input",{onChange:function(e){g(e.currentTarget.value)},size:5}),Object(O.jsx)("input",{type:"submit",value:"Upload map"})]}),Object(O.jsxs)("form",{id:"cabinet-form",className:"cabinet-edit",onSubmit:function(e){e.preventDefault(),r([].concat(Object(f.a)(s),[n])),c({x:NaN,y:NaN}),S(""),E("")},children:[Object(O.jsxs)("div",{children:[Object(O.jsx)("label",{htmlFor:"cabinet",children:"Cabinet:"}),Object(O.jsx)("input",{id:"cabinet",size:5,onChange:function(e){S(e.currentTarget.value)}}),Object(O.jsx)("label",{htmlFor:"description",children:"Description"}),Object(O.jsx)("input",{id:"description",size:5,onChange:function(e){E(e.currentTarget.value)}})]}),Object(O.jsxs)("div",{children:[Object(O.jsx)("label",{htmlFor:"x",children:"X:"}),Object(O.jsx)("input",{readOnly:!0,id:"x",size:5,value:i.x}),Object(O.jsx)("label",{htmlFor:"y",children:"Y:"}),Object(O.jsx)("input",{readOnly:!0,id:"y",size:5,value:i.y}),Object(O.jsx)("input",{className:"edit-button",type:"submit",value:"Add"})]})]})]})},v=(n(25),function(e){var t=e.setCoords,n=e.link,c=e.setLink;return Object(O.jsxs)("div",{children:[Object(O.jsxs)("div",{className:"link-insert",children:[Object(O.jsx)("label",{children:"Link: "}),Object(O.jsx)("input",{value:n,onChange:function(e){c(e.currentTarget.value)}})]}),Object(O.jsx)("br",{}),0!==n.length?Object(O.jsx)("img",{className:"edited-map-image",alt:"",src:n,onClick:function(e){var n=e.currentTarget.getBoundingClientRect();t({x:(100*(e.clientX-n.left)/n.width).toFixed(4),y:(100*(e.clientY-n.top)/n.height).toFixed(4)})}}):null]})}),N=(n(26),function(e){var t=e.positions;return Object(O.jsx)("div",{className:"card-list",children:t.map((function(e,t){return Object(O.jsxs)("div",{className:"card",children:[Object(O.jsxs)("label",{children:["Cabinet: ",e.cabinet]}),Object(O.jsxs)("label",{children:["Description: ",e.description]}),Object(O.jsxs)("label",{children:["X: ",e.x]}),Object(O.jsxs)("label",{children:["Y: ",e.y]})]},t)}))})}),g=function(){var e=Object(l.useState)({}),t=Object(o.a)(e,2),n=t[0],c=t[1],i=Object(l.useState)({x:NaN,y:NaN}),a=Object(o.a)(i,2),r=a[0],j=a[1],u=Object(l.useState)(""),b=Object(o.a)(u,2),d=b[0],h=b[1],m=Object(l.useState)([]),x=Object(o.a)(m,2),f=x[0],g=x[1];return Object(O.jsxs)("div",{className:"App",children:[Object(O.jsx)("div",{className:"link-add",children:Object(O.jsx)(s.b,{className:"linkstyle",to:"/",children:"Home"})}),Object(O.jsx)(p,{editedPosition:n,setEditedPosition:c,coords:r,setCoords:j,link:d,positions:f,setPositions:g}),Object(O.jsx)(v,{setCoords:j,link:d,setLink:h}),Object(O.jsx)(N,{positions:f})]})},C=document.getElementById("root");i.a.render(Object(O.jsx)(s.a,{children:Object(O.jsxs)(r.c,{children:[Object(O.jsx)(r.a,{path:"/",element:Object(O.jsx)(x,{})}),Object(O.jsx)(r.a,{path:"/add",element:Object(O.jsx)(g,{})})]})}),C),a()}],[[27,1,2]]]);
//# sourceMappingURL=main.757e9272.chunk.js.map